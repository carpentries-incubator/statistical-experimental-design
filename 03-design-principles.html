<!DOCTYPE html>
<!-- START: inst/pkgdown/templates/layout.html --><!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><title>Statistical Experimental Design: Experimental Design Principles</title><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="stylesheet" type="text/css" href="assets/styles.css"><script src="assets/scripts.js" type="text/javascript"></script><!-- mathjax --><script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      config: ["MMLorHTML.js"],
      jax: ["input/TeX","input/MathML","output/HTML-CSS","output/NativeMML", "output/PreviewHTML"],
      extensions: ["tex2jax.js","mml2jax.js","MathMenu.js","MathZoom.js", "fast-preview.js", "AssistiveMML.js", "a11y/accessibility-menu.js"],
      TeX: {
        extensions: ["AMSmath.js","AMSsymbols.js","noErrors.js","noUndefined.js"]
      },
      tex2jax: {
        inlineMath: [['\\(', '\\)']],
        displayMath: [ ['$$','$$'], ['\\[', '\\]'] ],
        processEscapes: true
      }
    });
    </script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><!-- Responsive Favicon for The Carpentries --><link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png"><link rel="manifest" href="site.webmanifest"><link rel="mask-icon" href="safari-pinned-tab.svg" color="#5bbad5"><meta name="msapplication-TileColor" content="#da532c"><meta name="theme-color" content="#ffffff"></head><body>
    <header id="top" class="navbar navbar-expand-md navbar-light bg-white top-nav carpentries"><a class="visually-hidden-focusable skip-link" href="#main-content">Skip to main content</a>
  <div class="container-fluid top-nav-container">
    <div class="col-md-6">
      <div class="large-logo">
        <img alt="The Carpentries" src="assets/images/carpentries-logo.svg"><abbr class="badge badge-light" title="This lesson is in the pre-alpha phase, which means that it is in early development, but has not yet been taught." style="background-color: #FF4955; border-radius: 5px">
          <a href="https://cdh.carpentries.org/the-lesson-life-cycle.html#early-development-pre-alpha-through-alpha" class="external-link alert-link" style="color: #000">
            <i aria-hidden="true" class="icon" data-feather="alert-octagon" style="border-radius: 5px"></i>
            Pre-Alpha
          </a>
          <span class="visually-hidden">This lesson is in the pre-alpha phase, which means that it is in early development, but has not yet been taught.</span>
        </abbr>
        
      </div>
    </div>
    <div class="selector-container">
      
      
      <div class="dropdown">
        <button class="btn btn-secondary dropdown-toggle bordered-button" type="button" id="dropdownMenu1" data-bs-toggle="dropdown" aria-expanded="false">
          <i aria-hidden="true" class="icon" data-feather="eye"></i> Learner View <i data-feather="chevron-down"></i>
        </button>
        <ul class="dropdown-menu" aria-labelledby="dropdownMenu1"><li><button class="dropdown-item" type="button" onclick="window.location.href='instructor/03-design-principles.html';">Instructor View</button></li>
        </ul></div>
    </div>
  </div>
  <hr></header><nav class="navbar navbar-expand-xl navbar-light bg-white bottom-nav carpentries" aria-label="Main Navigation"><div class="container-fluid nav-container">
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle Navigation">
      <span class="navbar-toggler-icon"></span>
      <span class="menu-title">Menu</span>
    </button>
    <div class="nav-logo">
      <img class="small-logo" alt="The Carpentries" src="assets/images/carpentries-logo-sm.svg"></div>
    <div class="lesson-title-md">
      Statistical Experimental Design
    </div>
    <div class="search-icon-sm">
      <!-- TODO: do not show until we have search
        <i role="img" aria-label="search button" data-feather="search"></i>
      -->
    </div>
    <div class="desktop-nav">
      <ul class="navbar-nav me-auto mb-2 mb-lg-0"><li class="nav-item">
          <span class="lesson-title">
            Statistical Experimental Design
          </span>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="key-points.html">Key Points</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="reference.html#glossary">Glossary</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="profiles.html">Learner Profiles</a>
        </li>
        <li class="nav-item dropdown">
          <button class="nav-link dropdown-toggle" id="navbarDropdown" data-bs-toggle="dropdown" aria-expanded="false">
            More <i data-feather="chevron-down"></i>
          </button>
          <ul class="dropdown-menu" aria-labelledby="navbarDropdown"><li><a class="dropdown-item" href="discuss.html">Discussion</a></li><li><a class="dropdown-item" href="reference.html">Glossary</a></li>
          </ul></li>
      </ul></div>
    <form class="d-flex col-md-2 search-form">
      <fieldset disabled><input class="form-control me-2 searchbox" type="search" placeholder="Search" aria-label="Search"><button class="btn btn-outline-success tablet-search-button" type="submit">
          <i class="search-icon" data-feather="search" role="img" aria-label="search button"></i>
        </button>
      </fieldset></form>
  </div><!--/div.container-fluid -->
</nav><div class="col-md-12 mobile-title">
  Statistical Experimental Design
</div>

<aside class="col-md-12 lesson-progress"><div style="width: NaN%" class="percentage">
    NaN%
  </div>
  <div class="progress carpentries">
    <div class="progress-bar carpentries" role="progressbar" style="width: NaN%" aria-valuenow="NaN" aria-label="Lesson Progress" aria-valuemin="0" aria-valuemax="100">
    </div>
  </div>
</aside><div class="container">
      <div class="row">
        <!-- START: inst/pkgdown/templates/navbar.html -->
<div id="sidebar-col" class="col-lg-4">
  <div id="sidebar" class="sidebar">
      <nav aria-labelledby="flush-headingEleven"><button role="button" aria-label="close menu" alt="close menu" aria-expanded="true" aria-controls="sidebar" class="collapse-toggle" data-collapse="Collapse " data-episodes="Episodes ">
          <i class="search-icon" data-feather="x" role="img"></i>
        </button>
        <div class="sidebar-inner">
          <div class="row mobile-row">
            <div class="col">
              <div class="sidenav-view-selector">
                <div class="accordion accordion-flush" id="accordionFlush9">
                  <div class="accordion-item">
                    <h2 class="accordion-header" id="flush-headingNine">
                      <button class="accordion-button collapsed" id="instructor" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseNine" aria-expanded="false" aria-controls="flush-collapseNine">
                        <i id="eye" aria-hidden="true" class="icon" data-feather="eye"></i> Learner View
                      </button>
                    </h2>
                    <div id="flush-collapseNine" class="accordion-collapse collapse" aria-labelledby="flush-headingNine" data-bs-parent="#accordionFlush2">
                      <div class="accordion-body">
                        <a href="instructor/03-design-principles.html">Instructor View</a>
                      </div>
                    </div>
                  </div><!--/div.accordion-item-->
                </div><!--/div.accordion-flush-->
              </div><!--div.sidenav-view-selector -->
            </div><!--/div.col -->
      
            <hr></div><!--/div.mobile-row -->

          <div class="accordion accordion-flush" id="accordionFlush11">
            <div class="accordion-item">

              <button id="chapters" class="accordion-button show" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseEleven" aria-expanded="false" aria-controls="flush-collapseEleven">
                <h2 class="accordion-header chapters" id="flush-headingEleven">
                  EPISODES
                </h2>
              </button>
              <div id="flush-collapseEleven" class="accordion-collapse show collapse" aria-labelledby="flush-headingEleven" data-bs-parent="#accordionFlush11">

                <div class="accordion-body">
                  <div class="accordion accordion-flush" id="accordionFlush1">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading1">
        <a href="index.html">Summary and Setup</a>
    </div><!--/div.accordion-header-->
        
  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush2">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading2">
        <a href="01-introduction.html">1. Introduction</a>
    </div><!--/div.accordion-header-->
        
  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush3">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading3">
        <a href="02-experimental-structure.html">2. Essential Features of a Comparative Experiment</a>
    </div><!--/div.accordion-header-->
        
  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlushcurrent">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-headingcurrent">
      <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapsecurrent" aria-expanded="true" aria-controls="flush-collapsecurrent">
        <span class="visually-hidden">Current Chapter</span>
        <span class="current-chapter">
        3. Experimental Design Principles
        </span>
      </button>
    </div><!--/div.accordion-header-->
        
    <div id="flush-collapsecurrent" class="accordion-collapse collapse show" aria-labelledby="flush-headingcurrent" data-bs-parent="#accordionFlushcurrent">
      <div class="accordion-body">
        <ul><li><a href="#replication-to-characterize-variability">Replication to characterize variability</a></li>
<li><a href="#randomization">Randomization</a></li>
        </ul></div><!--/div.accordion-body-->
    </div><!--/div.accordion-collapse-->
        
  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush5">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading5">
        <a href="04-statistical-data-analysis.html">4. Statistics in Data Analysis</a>
    </div><!--/div.accordion-header-->
        
  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush6">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading6">
        <a href="05-complete-random-design.html">5. Completely Randomized Designs</a>
    </div><!--/div.accordion-header-->
        
  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush7">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading7">
        <a href="06-complete-random-design-multitreatment-factors.html">6. Completely Randomized Design with More than One Treatment Factor</a>
    </div><!--/div.accordion-header-->
        
  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush8">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading8">
        <a href="07-complete-random-block.html">7. Randomized Complete Block Designs</a>
    </div><!--/div.accordion-header-->
        
  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush9">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading9">
        <a href="08-repeated-measures-design.html">8. Repeated Measures Designs</a>
    </div><!--/div.accordion-header-->
        
  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

                </div>
              </div>
            </div>

            <hr class="half-width"><div class="accordion accordion-flush resources" id="accordionFlush12">
              <div class="accordion-item">
                <h2 class="accordion-header" id="flush-headingTwelve">
                  <button class="accordion-button collapsed" id="resources" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseTwelve" aria-expanded="false" aria-controls="flush-collapseTwelve">
                    RESOURCES
                  </button>
                </h2>
                <div id="flush-collapseTwelve" class="accordion-collapse collapse" aria-labelledby="flush-headingTwelve" data-bs-parent="#accordionFlush12">
                  <div class="accordion-body">
                    <ul><li>
                        <a href="key-points.html">Key Points</a>
                      </li>
                      <li>
                        <a href="reference.html#glossary">Glossary</a>
                      </li>
                      <li>
                        <a href="profiles.html">Learner Profiles</a>
                      </li>
                      <li><a href="discuss.html">Discussion</a></li><li><a href="reference.html">Glossary</a></li>
                    </ul></div>
                </div>
              </div>
            </div>
            <hr class="half-width resources"><a href="aio.html">See all in one page</a>
            

            <hr class="d-none d-sm-block d-md-none"><div class="d-grid gap-1">
            
            </div>
          </div><!-- /div.accordion -->
        </div><!-- /div.sidebar-inner -->
      </nav></div><!-- /div.sidebar -->
  </div><!-- /div.sidebar-col -->
<!-- END:   inst/pkgdown/templates/navbar.html-->

        <!-- START: inst/pkgdown/templates/content-instructor.html -->
  <div class="col-xl-8 col-lg-12 primary-content">
    <nav class="lesson-content mx-md-4" aria-label="Previous and Next Chapter"><!-- content for small screens --><div class="d-block d-sm-block d-md-none">
        <a class="chapter-link" href="02-experimental-structure.html"><i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>Previous</a>
        <a class="chapter-link float-end" href="04-statistical-data-analysis.html">Next<i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i></a>
      </div>
      <!-- content for large screens -->
      <div class="d-none d-sm-none d-md-block">
        <a class="chapter-link" href="02-experimental-structure.html" rel="prev">
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>
          Previous: Essential Features
        </a>
        <a class="chapter-link float-end" href="04-statistical-data-analysis.html" rel="next">
          Next: Statistics in Data... 
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i>
        </a>
      </div>
      <hr></nav><main id="main-content" class="main-content"><div class="container lesson-content">
        <h1>Experimental Design Principles</h1>
        <p>Last updated on 2024-03-28 |
        
        <a href="https://github.com/smcclatchy/statistical-experimental-design/edit/main/episodes/03-design-principles.Rmd" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
        
        
        
        <div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>

        

<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul><li>What are the core principles of experimental design?</li>
</ul></div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul><li>The way in which a design applies treatments to experimental units
and measures the responses will determine 1) what questions can be
answered and 2) with what precision relationships can be described.</li>
<li>The core principles guiding the way are 1) replication, 2)
randomization and 3) blocking.</li>
</ul></div>
</div>
</div>
</div>
</div>
<p>Variability is natural in the real world. A medication given to a
group of patients will affect each of them differently. A specific diet
given to a cage of mice will affect each mouse differently. Ideally if
something is measured many times, each measurement will give exactly the
same result and will represent the true value. This ideal doesn’t exist
in the real world. For example, the mass of one kilogram is defined by
the <a href="https://en.wikipedia.org/wiki/International_Prototype_of_the_Kilogram" class="external-link">International
Prototype Kilogram</a>, a cylinder composed of platinum and iridium
about the size of a golf ball. <img src="fig/International_prototype_of_the_kilogram_aka_Le_Grand_K.png" alt="International Prototype of the Kilogram" class="figure"></p>
<p>Copies of this prototype kilogram (replicates) are distributed
worldwide so each country hosting a replica has its own national
standard kilogram. None of the replicas measure precisely the same
despite careful storage and handling. The reasons for this variation in
measurements are not known. A kilogram in Austria differs from a
kilogram in Australia, which differs from that in Brazil, Kazakhstan,
Pakistan, Switzerland or the U.S. What we assume is an absolute measure
of mass shows real-world natural variability. Variability is a feature
of natural systems and also a natural part of every experiment we
undertake.</p>
<section id="replication-to-characterize-variability"><h2 class="section-heading">Replication to characterize variability<a class="anchor" aria-label="anchor" href="#replication-to-characterize-variability"></a>
</h2>
<hr class="half-width"><p>To figure out whether a difference in responses is real or inherently
random, <strong>replication</strong> applies the same treatment to
multiple experimental units. The variability of the responses within a
set of replicates provides a measure against which we can compare
differences among different treatments. This variability is known as
<strong>experimental error</strong>. This does not mean that something
was done wrongly! It’s a phrase describing the variability in the
responses. Random variation is also known as <strong>random
error</strong> or <strong>noise</strong>. It reflects imprecision, but
not inaccuracy. Larger sample sizes reduce this imprecision.</p>
<p>In addition to random (experimental) error, also known as noise,
there are two other sources of variability in experiments.
<strong>Systematic error</strong> or bias, occurs when there are
deviations in measurements or observations that are consistently in one
particular direction, either overestimating or underestimating the true
value. As an example, a scale might be calibrated so that mass
measurements are consistently too high or too low. Unlike random error,
systematic error is consistent in one direction, is predictable and
follows a pattern. Larger sample sizes don’t correct for systematic
bias; equipment or measurement calibration does. <strong>Technical
replicates</strong> define this systematic bias by running the same
sample through the machine or measurement protocol multiple times to
characterize the variation caused by equipment or protocols.</p>
<p>A <strong>biological replicate</strong> measures different biological
samples in parallel to estimate the variation caused by the unique
biology of the samples. The sample or group of samples are derived from
the same biological source, such as cells, tissues, organisms, or
individuals. Biological replicates assess the variability and
reproducibility of experimental results. For example, if a study
examines the effect of a drug on cell growth, biological replicates
would involve multiple sets of cells from the same cell line to test the
drug’s effects. This helps to ensure that any observed changes are due
to the drug itself rather than variations in the biological material
being used.</p>
<p>The greater the number of replications, the greater the precision
(the closeness of two or more measurements to each other). Having a
large enough sample size to ensure high precision is necessary to ensure
reproducible results.</p>
<div id="exercise-1-which-kind-of-error" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="exercise-1-which-kind-of-error" class="callout-inner">
<h3 class="callout-title">Exercise 1: Which kind of error?<a class="anchor" aria-label="anchor" href="#exercise-1-which-kind-of-error"></a>
</h3>
<div class="callout-content">
<p>A study used to determine the effect of a drug on weight loss could
have the following sources of experimental error. Classify the following
sources as either biological, systematic, or random error.<br>
1). A scale is broken and provides inconsistent readings.<br>
2). A scale is calibrated wrongly and consistently measures mice 1 gram
heavier.<br>
3). A mouse has an unusually high weight compared to its experimental
group (i.e., it is an outlier).<br>
4). Strong atmospheric low pressure and accompanying storms affect
instrument readings, animal behavior, and indoor relative humidity.</p>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1">Solution to Exercise 1</h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" aria-labelledby="headingSolution1" data-bs-parent="#accordionSolution1">
<div class="accordion-body">
<p>1). random, because the scale is broken and provides any kind of
random reading it comes up with (inconsistent reading)<br>
2). systematic<br>
3). biological<br>
4). random or systematic; you argue which and explain why</p>
</div>
</div>
</div>
</div>
<p>These three sources of error can be mitigated by good experimental
design. Systematic and biological error can be mitigated through
adequate numbers of technical and biological replicates, respectively.
Random error can also be mitigated by experimental design, however,
replicates are not effective. By definition random error is
unpredictable or unknowable. For example, an atmospheric low pressure
system or a strong storm could affect equipment measurements, animal
behavior, and indoor relative humidity, which introduces random error.
We could assume that all random error will balance itself out, and that
all samples will be equally subject to random error. A more precise way
to mitigate random error is through blocking.</p>
</section><section id="randomization"><h2 class="section-heading">Randomization<a class="anchor" aria-label="anchor" href="#randomization"></a>
</h2>
<hr class="half-width"><div id="exercise-2-the-efficient-technician" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="exercise-2-the-efficient-technician" class="callout-inner">
<h3 class="callout-title">Exercise 2: The efficient technician<a class="anchor" aria-label="anchor" href="#exercise-2-the-efficient-technician"></a>
</h3>
<div class="callout-content">
<p>Your technician colleague finds a way to simplify and expedite an
experiment. The experiment applies four different wheel-running
treatments to twenty different mice over the course of five days. Four
mice are treated individually each day for two hours each with a random
selection of the four treatments. Your clever colleague decides that a
simplified protocol would work just as well and save time. Run treatment
1 five times on day 1, treatment 2 five times on day 2, and so on. Some
overtime would be required each day but the experiment would be
completed in only four days, and then they can take Friday off! Does
this adjustment make sense to you?<br>
Can you foresee any problems with the experimental results?</p>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2">Solution to Exercise 2</h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" aria-labelledby="headingSolution2" data-bs-parent="#accordionSolution2">
<div class="accordion-body">
<p>Since each treatment is run on only one day, the day effectively
becomes the experimental unit (explain this). Each experimental unit
(day) has five samples (mice), but only one replication of each
treatment. There is no valid way to compare treatments as a result.
There is no way to separate the treatment effect from the day-to-day
differences in environment, equipment setup, personnel, and other
extraneous variables.</p>
</div>
</div>
</div>
</div>
<p>Why should treatments be randomly assigned to experimental units?
Randomization minimizes bias and moderates experimental error (a.k.a.
noise). A hat full of numbers, a random number table or a computational
random number generator can be used to assign random numbers to
experimental units so that any experimental unit has equal chances of
being assigned to a specific treatment group.</p>
<p>Here is an example of randomization using a random number generator.
The study asks how a high-fat diet affects blood pressure in mice. If
the number is odd, the sample is assigned to the treatment group, which
receives the high-fat diet. If the random number is even, the sample is
assigned to the control group (the group that doesn’t receive the
treatment, in this case, regular chow).</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># create the mouse IDs and 26 random numbers between 1 and 100</span></span>
<span><span class="va">mouse_ID</span> <span class="op">&lt;-</span> <span class="va">LETTERS</span></span>
<span><span class="va">random_number</span> <span class="op">&lt;-</span> <span class="fu">sample</span><span class="op">(</span>x <span class="op">=</span> <span class="fl">100</span>, size <span class="op">=</span> <span class="fl">26</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># %% is the modulo operator, which returns the remainder from division by 2</span></span>
<span><span class="co"># if the remainder is 0 (even number), regular chow diet is assigned</span></span>
<span><span class="va">treatment</span> <span class="op">&lt;-</span> <span class="fu">ifelse</span><span class="op">(</span><span class="va">random_number</span> <span class="op">%%</span> <span class="fl">2</span> <span class="op">==</span> <span class="fl">0</span>, <span class="st">"chow"</span>, <span class="st">"high fat"</span><span class="op">)</span></span>
<span><span class="va">random_allocation</span> <span class="op">&lt;-</span> <span class="fu">data.frame</span><span class="op">(</span><span class="va">mouse_ID</span>, <span class="va">random_number</span>, <span class="va">treatment</span><span class="op">)</span></span>
<span><span class="va">random_allocation</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>   mouse_ID random_number treatment
1         A            42      chow
2         B            38      chow
3         C            19  high fat
4         D            54      chow
5         E             8      chow
6         F            58      chow
7         G            17  high fat
8         H            15  high fat
9         I            26      chow
10        J            81  high fat
11        K            48      chow
12        L            44      chow
13        M            79  high fat
14        N            87  high fat
15        O            36      chow
16        P            84      chow
17        Q            66      chow
18        R            25  high fat
19        S             9  high fat
20        T            77  high fat
21        U             2      chow
22        V            28      chow
23        W            31  high fat
24        X            91  high fat
25        Y            74      chow
26        Z             1  high fat</code></pre>
</div>
<p>This might produce unequal numbers between treatment and control
groups. It isn’t necessary to have equal numbers, however,
<strong>sensitivity</strong> or <strong>statistical power</strong> (the
probability of detecting an effect when it truly exists) is maximized
when sample numbers are equal.</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">table</span><span class="op">(</span><span class="va">random_allocation</span><span class="op">$</span><span class="va">treatment</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>
    chow high fat 
      14       12 </code></pre>
</div>
<p>To randomly assign samples to groups with equal numbers, you can do
the following.</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># place IDs and random numbers in data frame</span></span>
<span><span class="va">equal_allocation</span> <span class="op">&lt;-</span> <span class="fu">data.frame</span><span class="op">(</span><span class="va">mouse_ID</span>, <span class="va">random_number</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># sort by random numbers (not by sample IDs)</span></span>
<span><span class="va">equal_allocation</span> <span class="op">&lt;-</span> <span class="va">equal_allocation</span><span class="op">[</span><span class="fu">order</span><span class="op">(</span><span class="va">random_number</span><span class="op">)</span>,<span class="op">]</span></span>
<span></span>
<span><span class="co"># now assign to treatment or control groups</span></span>
<span><span class="va">treatment</span> <span class="op">&lt;-</span> <span class="fu">sort</span><span class="op">(</span><span class="fu">rep</span><span class="op">(</span>x <span class="op">=</span> <span class="fu">c</span><span class="op">(</span><span class="st">"chow"</span>, <span class="st">"high fat"</span><span class="op">)</span>, times <span class="op">=</span> <span class="fl">13</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">equal_allocation</span> <span class="op">&lt;-</span> <span class="fu">cbind</span><span class="op">(</span><span class="va">equal_allocation</span>, <span class="va">treatment</span><span class="op">)</span></span>
<span><span class="fu">row.names</span><span class="op">(</span><span class="va">equal_allocation</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fl">1</span><span class="op">:</span><span class="fl">26</span></span>
<span><span class="va">equal_allocation</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>   mouse_ID random_number treatment
1         Z             1      chow
2         U             2      chow
3         E             8      chow
4         S             9      chow
5         H            15      chow
6         G            17      chow
7         C            19      chow
8         R            25      chow
9         I            26      chow
10        V            28      chow
11        W            31      chow
12        O            36      chow
13        B            38      chow
14        A            42  high fat
15        L            44  high fat
16        K            48  high fat
17        D            54  high fat
18        F            58  high fat
19        Q            66  high fat
20        Y            74  high fat
21        T            77  high fat
22        M            79  high fat
23        J            81  high fat
24        P            84  high fat
25        N            87  high fat
26        X            91  high fat</code></pre>
</div>
<p>You can write out this treatment plan to a comma-separated values
(csv) file, then open it in Excel and use it to record your data
collection or just keep track of which samples are randomly assigned
which diet.</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">write.csv</span><span class="op">(</span><span class="va">equal_allocation</span>, file <span class="op">=</span> <span class="st">"../data/random-assign.csv"</span>, row.names <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">WARNING<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="warning" tabindex="0"><code>Warning in file(file, ifelse(append, "a", "w")): cannot open file
'../data/random-assign.csv': No such file or directory</code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error in file(file, ifelse(append, "a", "w")): cannot open the connection</code></pre>
</div>
<div id="discussion" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="discussion" class="callout-inner">
<h3 class="callout-title">Discussion<a class="anchor" aria-label="anchor" href="#discussion"></a>
</h3>
<div class="callout-content">
<p>Why not assign treatment and control groups to samples in
alphabetical order?<br>
Did we really need a random number generator to obtain randomized equal
groups?</p>
</div>
</div>
</div>
<div id="accordionSolution3" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution3" aria-expanded="false" aria-controls="collapseSolution3">
  <h4 class="accordion-header" id="headingSolution3">Show me the solution</h4>
</button>
<div id="collapseSolution3" class="accordion-collapse collapse" aria-labelledby="headingSolution3" data-bs-parent="#accordionSolution3">
<div class="accordion-body">
<p>1). Scenario: One technician processed samples A through M, and a
different technician processed samples N through Z. Might the first
technician have processed samples somewhat differently from the second
technician? If so, there would be a “technician effect” in the results
that would be difficult to separate from the treatment effect. 2).
Another scenario: Samples A through M were processed on a Monday, and
samples N through Z on a Tuesday. Might the weather or the environment
in general have been different between Monday and Tuesday? What if a big
construction project started on Tuesday, or the whole team had a
birthday gathering for one of their members, or anything else in the
environment differed between Monday and Tuesday? If so, there would be a
“day-of-the-week effect” in the results that would be difficult to
separate from the treatment effect. 3). Yet another scenario: Samples A
through M were from one strain, and samples N through Z from a different
strain. How would you be able to distinguish between the treatment
effect and the strain effect? 4). Yet another scenario: Samples with
consecutive ids were all sibling groups. For example, samples A, B and C
were all siblings, and all assigned to the same treatment.<br>
All of these cases would have introduced an effect (from the technician,
the day of the week, the strain, or sibling relationships) that would
confound the results and lead to misinterpretation.</p>
</div>
</div>
</div>
</div>
<div class="section level3">
<h3 id="controlling-natural-variation-with-blocking">Controlling Natural Variation with Blocking<a class="anchor" aria-label="anchor" href="#controlling-natural-variation-with-blocking"></a></h3>
<p>Experimental units can be grouped, or <strong>blocked</strong>, to
increase the precision of treatment comparisons. Blocking divides an
experiment into groups of experimental units to control natural
variation among these units. Treatments are randomized to experimental
units within each block. Each block, then, is effectively a
sub-experiment.</p>
<p>Randomization within blocks accounts for nuisance variables that
could bias the results, such as day, time, cage proximity to light or
ventilation, etc. In the illustration below, three treatments are
randomized to the experimental units (the cages) on each shelf. Each
shelf is a block that accounts for random variation introduced by a
nuisance variable, proximity to the light.</p>
<figure><img src="fig/half-racks.png" alt="shelves of cages beneath a light" class="figure mx-auto d-block"></figure><p>Shelf height is a <strong>blocking factor</strong> that should be
included in the data analysis phase of the experiment. Adding a nuisance
variable as a blocking factor accounts for variability and can increase
the probability of detecting a real treatment effect
(<strong>statistical power</strong>). If the blocking factor doesn’t
substantially impact variability, however, it reduces the information
used to estimate a statistic (<strong>degrees of freedom</strong>) and
diminishes statistical power. Blocking should only be used when a
variable is suspected to impact the experiment.</p>
<p>Another way to define blocks of experimental units is to use
characteristics or traits that are likely associated with the response.
Sex and age, for example, can serve as blocking factors in experiments,
with experimental units randomly allocated to each block based on age
category and sex. <em>Stratified randomization</em> places experimental
units into separate blocks for each age category and sex. As with
nuisance variables, these blocking factors (age and sex) should be used
in the subsequent data analysis.</p>
<div id="exercise-3-explain-blocking-to-the-efficient-technician" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="exercise-3-explain-blocking-to-the-efficient-technician" class="callout-inner">
<h3 class="callout-title">Exercise 3: Explain blocking to the efficient
technician<a class="anchor" aria-label="anchor" href="#exercise-3-explain-blocking-to-the-efficient-technician"></a>
</h3>
<div class="callout-content">
<p>Your technician colleague is not only efficient but very
well-organized. They will administer treatments A, B and C shown in the
figure above.</p>
<ol style="list-style-type: decimal"><li>Explain to your colleague why the treatments should not be
administered by shelf (e.g. the top shelf all get treatment A, the next
shelf B and the lower shelf treatment C).</li>
<li>Explain blocking to the technician and describe how it helps the
experiment.</li>
</ol></div>
</div>
</div>
<div id="accordionSolution4" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution4" aria-expanded="false" aria-controls="collapseSolution4">
  <h4 class="accordion-header" id="headingSolution4">Solution to Exercise 3</h4>
</button>
<div id="collapseSolution4" class="accordion-collapse collapse" aria-labelledby="headingSolution4" data-bs-parent="#accordionSolution4">
<div class="accordion-body">

</div>
</div>
</div>
</div>
<div id="exercise-4-how-and-when-to-set-up-blocks" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="exercise-4-how-and-when-to-set-up-blocks" class="callout-inner">
<h3 class="callout-title">Exercise 4: How and when to set up blocks<a class="anchor" aria-label="anchor" href="#exercise-4-how-and-when-to-set-up-blocks"></a>
</h3>
<div class="callout-content">
<p>For the following scenarios, describe whether you would set up blocks
and if so, how you would set up the blocks.</p>
<ol style="list-style-type: decimal"><li>A large gene expression study will be run in five different batches
or runs.</li>
<li>An experiment will use two different models of equipment to obtain
measurements.</li>
<li>Samples will be processed in the morning, afternoon and
evening.</li>
<li>In a study in which mice were randomly assigned to treatment and
control groups, the air handler in the room went off and temperature and
humidity increased.</li>
</ol></div>
</div>
</div>
<div id="accordionSolution5" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution5" aria-expanded="false" aria-controls="collapseSolution5">
  <h4 class="accordion-header" id="headingSolution5">Solution to Exercise 4</h4>
</button>
<div id="collapseSolution5" class="accordion-collapse collapse" aria-labelledby="headingSolution5" data-bs-parent="#accordionSolution5">
<div class="accordion-body">

</div>
</div>
</div>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points<a class="anchor" aria-label="anchor" href="#keypoints1"></a>
</h3>
<div class="callout-content">
<ul><li>Replication, randomization and blocking determine the validity and
usefulness of an experiment.</li>
</ul></div>
</div>
</div>
</div>
</section></div> <!-- / div.lesson-content -->
    </main><!-- / main#main-content.main-content --><nav class="bottom-pagination mx-md-4" aria-label="Previous and Next Chapter"><div class="d-block d-sm-block d-md-none">
        <a class="chapter-link" href="02-experimental-structure.html"><i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>Previous</a>
        <a class="chapter-link float-end" href="04-statistical-data-analysis.html">Next<i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i></a>
      </div>
      <!-- content for large screens -->
      <div class="d-none d-sm-none d-md-block">
        <a class="chapter-link" href="02-experimental-structure.html" rel="prev">
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>
          Previous: Essential Features
        </a>
        <a class="chapter-link float-end" href="04-statistical-data-analysis.html" rel="next">
          Next: Statistics in Data... 
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i>
        </a>
      </div>
    </nav></div> <!-- / div.primary-content.col-xs-12 -->
<!-- END:   inst/pkgdown/templates/content-instructor.html-->

      </div><!--/div.row-->
      		<footer class="row footer mx-md-3"><hr><div class="col-md-6">
        <p>This lesson is subject to the <a href="CODE_OF_CONDUCT.html">Code of Conduct</a></p>
        <p>
        
        <a href="https://github.com/smcclatchy/statistical-experimental-design/edit/main/episodes/03-design-principles.Rmd" class="external-link">Edit on GitHub</a>
        
	
        | <a href="https://github.com/smcclatchy/statistical-experimental-design/blob/main/CONTRIBUTING.md" class="external-link">Contributing</a>
        | <a href="https://github.com/smcclatchy/statistical-experimental-design/" class="external-link">Source</a></p>
				<p><a href="https://github.com/smcclatchy/statistical-experimental-design/blob/main/CITATION" class="external-link">Cite</a> | <a href="mailto:team@carpentries.org">Contact</a> | <a href="https://carpentries.org/about/" class="external-link">About</a></p>
			</div>
			<div class="col-md-6">
        
        <p>Materials licensed under <a href="LICENSE.html">CC-BY 4.0</a> by the authors</p>
        
        <p>Template licensed under <a href="https://creativecommons.org/licenses/by-sa/4.0/" class="external-link">CC-BY 4.0</a> by <a href="https://carpentries.org/" class="external-link">The Carpentries</a></p>
        <p>Built with <a href="https://github.com/carpentries/sandpaper/tree/0.16.3" class="external-link">sandpaper (0.16.3)</a>, <a href="https://github.com/carpentries/pegboard/tree/0.7.4" class="external-link">pegboard (0.7.4)</a>, and <a href="https://github.com/carpentries/varnish/tree/1.0.1" class="external-link">varnish (1.0.1)</a></p>
			</div>
		</footer></div> <!-- / div.container -->
	<div id="to-top">
		<a href="#top">
      <i class="search-icon" data-feather="arrow-up" role="img" aria-label="Back To Top"></i><br><!-- <span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Back</span> To Top --><span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Back</span> To Top
		</a>
	</div>
  <script type="application/ld+json">
    {
  "@context": "https://schema.org",
  "@type": "TrainingMaterial",
  "@id": "https://smcclatchy.github.io/statistical-experimental-design/03-design-principles.html",
  "inLanguage": "en",
  "dct:conformsTo": "https://bioschemas.org/profiles/TrainingMaterial/1.0-RELEASE",
  "description": "A Carpentries Lesson teaching foundational data and coding skills to researchers worldwide",
  "keywords": "software, data, lesson, The Carpentries",
  "name": "Experimental Design Principles",
  "creativeWorkStatus": "active",
  "url": "https://smcclatchy.github.io/statistical-experimental-design/03-design-principles.html",
  "identifier": "https://smcclatchy.github.io/statistical-experimental-design/03-design-principles.html",
  "dateCreated": "2023-04-03",
  "dateModified": "2024-03-28",
  "datePublished": "2024-03-28"
}

  </script><script>
		feather.replace();
	</script><!-- Matomo
    2022-11-07: we have gotten a notification that we have an overage for our
    tracking and I'm pretty sure this has to do with Workbench usage.
    Considering that I am not _currently_ using this tracking because I do not
    yet know how to access the data, I am turning this off for now.
  <script>
    var _paq = window._paq = window._paq || [];
    /* tracker methods like "setCustomDimension" should be called before "trackPageView" */
    _paq.push(["setDocumentTitle", document.domain + "/" + document.title]);
    _paq.push(["setDomains", ["*.preview.carpentries.org","*.datacarpentry.github.io","*.datacarpentry.org","*.librarycarpentry.github.io","*.librarycarpentry.org","*.swcarpentry.github.io", "*.carpentries.github.io"]]);
    _paq.push(["setDoNotTrack", true]);
    _paq.push(["disableCookies"]);
    _paq.push(['trackPageView']);
    _paq.push(['enableLinkTracking']);
    (function() {
          var u="https://carpentries.matomo.cloud/";
          _paq.push(['setTrackerUrl', u+'matomo.php']);
          _paq.push(['setSiteId', '1']);
          var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
          g.async=true; g.src='https://cdn.matomo.cloud/carpentries.matomo.cloud/matomo.js'; s.parentNode.insertBefore(g,s);
        })();
  </script>
  End Matomo Code --></body></html><!-- END:   inst/pkgdown/templates/layout.html-->

